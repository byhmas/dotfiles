# $Id$

set alias_file=~/Mail/mutt.addressbook
# File to search for aliases in
source  ~/Mail/mutt.addressbook

set ssl_starttls=yes
set certificate_file=~/Mail/certificates
set imap_force_ssl=yes

set spoolfile={hendry@mail.cs.helsinki.fi/ssl}INBOX
set folder={hendry@mail.cs.helsinki.fi/ssl}

#set spoolfile={hendry@dabase.com/ssl}
#set folder={hendry@dabase.com/ssl}

account-hook imaps://hendry@mail.cs.helsinki.fi 'set folder={hendry@mail.cs.helsinki.fi/ssl}; set spoolfile={hendry@mail.cs.helsinki.fi/ssl}INBOX'
account-hook imaps://hendry@daidalos.pannuhuone.org 'set folder={hendry@daidalos.pannuhuone.org/ssl}; set spoolfile={hendry@daidalos.pannuhuone.org/ssl}INBOX'

mailboxes !
mailboxes {hendry@mail.cs.helsinki.fi/ssl}INBOX {hendry@daidalos.pannuhuone.org/ssl}

#set move=yes

set realname="Kai Hendry"
set from="hendry@cs.helsinki.fi"
set hostname="cs.helsinki.fi"

set beep_new                    # beep if new mail comes in
set editor="vim '+set tw=72'"
set ispell="aspell -e -c"

set charset="utf-8"

set mbox=imaps://hendry@mail.cs.helsinki.fi/"INBOX.inbox.`date +%Y.%m-%b`" #Archive inbox mail
set postponed=imaps://hendry@mail.cs.helsinki.fi/INBOX.postponed  # location of postponed messages
set record=imaps://hendry@mail.cs.helsinki.fi/"INBOX.Sent.`date +%Y.%m-%b`" #Archive send mail

color status 	white 		blue
color index 	brightwhite	black   ~N    	
# Some of these contain special ppl :)
source ~/Mail/mutt.colours

set ascii_chars		# So the threading arrows show up properly	       
set sort=threads    # Sort by threads
set menu_scroll		# scroll on last line of menu 
unset suspend
set smart_wrap
set wrap_search
set abort_unmodified=no

# this is cool, dual text/html mails have only the text part shown
alternative_order text/plain   # I like plaintext more than html.
auto_view text/html

# When viewing next page of info, retain last line of previous page
set pager_context=5

# Works a bit like a "preview" screen; 
# you can see the pager and 5 lines of the index at the same time
set pager_index_lines=5

set pgp_replysign     # always sign reply to signed message
set pgp_replyencrypt  # always encrypt reply to encrypted message

# check these commands work
macro pager J "!gpg --keyserver wwwkeys.eu.pgp.net --recv-key " "Get PGP Key"
macro pager K "!gpg --lsign-key " "Sign PGP Key"

# BOGOFILTER
macro index X "<enter-command>unset wait_key\n<pipe-entry>bogofilter -S\n<enter-command>set wait_key\n<delete-message>"
macro pager X "<enter-command>unset wait_key\n<pipe-entry>bogofilter -S\n<enter-command>set wait_key\n<delete-message>"


hdr_order From From: To: Cc: Subject: Date: X-Note: X-Mailer: User-Agent: \
          X-MimeOLE: Content-Type:
unignore *
ignore "from " received mime-version status x-status 
ignore sender references return-path lines precedence content-length
ignore priority x-priority x-auth
ignore X-eGroups-Return X-Mailing-List List-Help List-Unsubscribe List-Archive
ignore X-Sieve
ignore Message-Id
ignore Envelope-to
ignore Content-Type
ignore content-transfer-encoding content-disposition
ignore In-reply-to
ignore x-originalarrivaltime
ignore x-bogosity
ignore x-spam-status
ignore x-spam-level
ignore x-mailer user-agent

#set autoedit           # start editor without asking for to, subject,...
set auto_tag           # if something is tagged, run commands on tagged msgs.
set fast_reply         # do not ask for to, subject,... when replying

set index_format="%4C %Z %[!%d/%m] %-17.17F (%3l) %s"
set pager_format="%S [%C] %n (%l) %s"
set folder_format="%F %d %8s %N %f"
set print_command="enscript -2r -o /tmp/email.ps -Email"

# this does not seem to work atm
#set query_command="lbdbq %s"

# Need this if using cygwin
#set sendmail = "/usr/sbin/ssmtp.exe"

send-hook   . 'my_hdr From: Kai Hendry <hendry@cs.helsinki.fi>' 
#send-hook   '~C hkkk' 'my_hdr From: Kai Hendry <k75930@ky.hkkk.fi>'
message-hook "~h multipart" "set mime_forward=ask-yes"

#bind attach S save-entry
macro attach s S^A~/Mail/mail-attachments/

#more powerful editing :)
#set edit_headers
